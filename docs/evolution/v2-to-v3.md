# V2 -> V3: 从记忆检索到任务显式规划

## 版本差异（实测）

| 维度 | V2 | V3 |
|---|---|---|
| 代码行数 | 481 | 551 |
| 工具数 | 10 | 11 |
| 新增工具 | - | `TodoWrite` |

---

## 核心改动

1. 新增 `TodoManager` 与任务状态模型。
2. 引入替换式 `TodoWrite`，每次提交完整任务列表。
3. 强约束：最多 20 项任务、最多 1 项 `in_progress`。

---

## 设计价值

- 复杂任务可见、可追踪、可恢复。
- 模型执行行为从“即兴”转向“有节律”。
