# V14 → V15: 多模型协作

## 新增能力

V15 引入多模型协作系统，支持：
- 模型注册表：统一管理多个模型提供商
- 任务分类器：自动识别任务类型
- 智能路由：根据任务选择最合适的模型
- 成本追踪：记录和优化 API 成本
- 降级机制：主模型失败时自动切换备用

## 新增工具 (5 个)

| 工具 | 描述 |
|------|------|
| `model_list` | 列出可用模型 |
| `model_route` | 路由任务到最佳模型 |
| `model_config` | 配置模型参数 |
| `model_stats` | 查看模型使用统计 |
| `model_switch` | 切换默认模型 |

## 核心变更

```typescript
// 新增: multimodel/ 模块
v15-agent/
├── multimodel/
│   ├── registry.ts    # 模型注册表
│   ├── router.ts      # 智能路由
│   ├── classifier.ts  # 任务分类
│   └── index.ts       # 工具定义
```

## 使用示例

```typescript
// 自动路由到最佳模型
const result = await tools.model_route({
  task: "翻译这段代码注释",
  preferCost: true  // 优先成本
});
// 输出: 路由到 claude-3-haiku (成本优先)

// 查看统计
const stats = await tools.model_stats({});
// 输出: claude-3-opus: 15 次, $0.45
//       claude-3-sonnet: 42 次, $0.21
```

## 设计亮点

1. **任务感知**: 根据任务复杂度选择模型
2. **成本优化**: 简单任务用便宜模型
3. **自动降级**: 主模型失败时切换备用
4. **透明追踪**: 记录所有路由决策

---

*详见: [docs/v15-多模型协作.md](../v15-多模型协作.md)*
